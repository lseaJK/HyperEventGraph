# HyperEventGraph çœŸå®æ•°æ®æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨ä½¿ç”¨çœŸå®çš„åŠå¯¼ä½“è¡Œä¸šæ–°é—»æ•°æ®æµ‹è¯• HyperEventGraph ç³»ç»Ÿçš„å®Œæ•´åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº‹ä»¶æŠ½å–ã€å…³ç³»åˆ†æã€GraphRAGå¢å¼ºå’Œæ ‡å‡†åŒ–è¾“å‡ºã€‚

## ğŸ“ æ•°æ®è¯´æ˜

**æ•°æ®æ–‡ä»¶**: `IC_data/filtered_data_demo.json`

**æ•°æ®å†…å®¹**: 5æ¡çœŸå®çš„åŠå¯¼ä½“è¡Œä¸šæ–°é—»ï¼ŒåŒ…æ‹¬ï¼š
- æ™¶åœ†ä»£å·¥ä¸šä»·æ ¼ä¸‹é™è¶‹åŠ¿
- ICè®¾è®¡ä¸šä¸‹åŠå¹´å±•æœ›
- æ—¥æœ¬åŠå¯¼ä½“è®¾å¤‡å‡ºå£ç®¡åˆ¶
- ç¾å›½èŠ¯ç‰‡å·¨å¤´CEOä¼šè°ˆ
- å…ˆè¿›å°è£…å¸‚åœºé¢„æµ‹

**æ•°æ®æ ¼å¼**: JSONæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºä¸€æ¡æ–°é—»æ–‡æœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ (æ¨è)

1. **åŒå‡»è¿è¡Œ** `run_test.bat`
2. **é€‰æ‹©æµ‹è¯•æ¨¡å¼**:
   - `1` - ç®€åŒ–æµ‹è¯• (æ¨èæ–°æ‰‹)
   - `2` - å®Œæ•´æµæ°´çº¿ (éœ€è¦APIé…ç½®)
   - `3` - ä»…å®‰è£…ä¾èµ–

### æ–¹æ³•2: å‘½ä»¤è¡Œè¿è¡Œ

```bash
# ç®€åŒ–æµ‹è¯•
python run_simple_test.py

# å®Œæ•´æµæ°´çº¿
python run_real_data_pipeline.py
```

## ğŸ“Š æµ‹è¯•æ¨¡å¼è¯´æ˜

### ğŸŸ¢ ç®€åŒ–æµ‹è¯•æ¨¡å¼ (`run_simple_test.py`)

**ç‰¹ç‚¹**:
- âœ… æ— éœ€å¤–éƒ¨APIé…ç½®
- âœ… å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½
- âœ… é€‚åˆåŠŸèƒ½éªŒè¯å’Œè°ƒè¯•

**æµ‹è¯•å†…å®¹**:
1. **æ•°æ®æ¨¡å‹æµ‹è¯•** - éªŒè¯Eventå’ŒEventRelationç±»
2. **çœŸå®æ•°æ®åŠ è½½** - è¯»å–IC_data/filtered_data_demo.json
3. **äº‹ä»¶æŠ½å–æ¨¡æ‹Ÿ** - åˆ›å»ºç»“æ„åŒ–äº‹ä»¶å¯¹è±¡
4. **å…³ç³»åˆ†æ** - ä½¿ç”¨è§„åˆ™åŸºç¡€çš„å…³ç³»è¯†åˆ«
5. **è¾“å‡ºå¯¼å‡º** - ç”ŸæˆJSONLæ ¼å¼æ–‡ä»¶

**è¾“å‡ºæ–‡ä»¶**:
```
output/simple_test_results/
â”œâ”€â”€ events_20240115_143022.jsonl     # äº‹ä»¶æ•°æ®
â””â”€â”€ relations_20240115_143022.jsonl  # å…³ç³»æ•°æ®
```

### ğŸ”µ å®Œæ•´æµæ°´çº¿æ¨¡å¼ (`run_real_data_pipeline.py`)

**ç‰¹ç‚¹**:
- ğŸ”§ éœ€è¦é…ç½®DeepSeek API
- ğŸš€ å®Œæ•´çš„AIé©±åŠ¨æµç¨‹
- ğŸ“ˆ åŒ…å«æ€§èƒ½ç›‘æ§

**æµ‹è¯•å†…å®¹**:
1. **AIäº‹ä»¶æŠ½å–** - ä½¿ç”¨DeepSeek LLMæŠ½å–ç»“æ„åŒ–äº‹ä»¶
2. **æ™ºèƒ½å…³ç³»åˆ†æ** - LLMé©±åŠ¨çš„äº‹ç†å…³ç³»è¯†åˆ«
3. **GraphRAGå¢å¼º** - å±æ€§è¡¥å……å’Œæ¨¡å¼å‘ç°
4. **å¤šæ ¼å¼è¾“å‡º** - JSONL + GraphMLæ ¼å¼
5. **æ€§èƒ½ç»Ÿè®¡** - å¤„ç†æ—¶é—´å’Œèµ„æºä½¿ç”¨

**è¾“å‡ºæ–‡ä»¶**:
```
output/real_data_results/
â”œâ”€â”€ events_20240115_143022.jsonl     # äº‹ä»¶æ•°æ®
â”œâ”€â”€ relations_20240115_143022.jsonl  # å…³ç³»æ•°æ®
â”œâ”€â”€ combined_20240115_143022.jsonl   # åˆå¹¶æ•°æ®
â”œâ”€â”€ graph_20240115_143022.graphml    # å›¾è°±æ–‡ä»¶
â””â”€â”€ report_20240115_143022.json      # ç»Ÿè®¡æŠ¥å‘Š
```

## âš™ï¸ é…ç½®è¦æ±‚

### ç®€åŒ–æµ‹è¯•æ¨¡å¼
- âœ… Python 3.8+
- âœ… åŸºç¡€ä¾èµ–åŒ… (è§requirements.txt)
- âœ… æ— éœ€å¤–éƒ¨API

### å®Œæ•´æµæ°´çº¿æ¨¡å¼
- âœ… Python 3.8+
- âœ… å®Œæ•´ä¾èµ–åŒ…
- ğŸ”‘ DeepSeek APIå¯†é’¥
- ğŸ—„ï¸ Neo4jæ•°æ®åº“ (å¯é€‰)
- ğŸ” ChromaDB (è‡ªåŠ¨åˆå§‹åŒ–)

## ğŸ”§ APIé…ç½® (å®Œæ•´æ¨¡å¼)

### DeepSeek APIé…ç½®

1. **è·å–APIå¯†é’¥**:
   - è®¿é—® [DeepSeekå®˜ç½‘](https://platform.deepseek.com/)
   - æ³¨å†Œè´¦å·å¹¶è·å–APIå¯†é’¥

2. **é…ç½®ç¯å¢ƒå˜é‡**:
   ```bash
   # æ–¹æ³•1: åˆ›å»º.envæ–‡ä»¶
   echo "DEEPSEEK_API_KEY=your_api_key_here" > .env
   
   # æ–¹æ³•2: è®¾ç½®ç¯å¢ƒå˜é‡
   set DEEPSEEK_API_KEY=your_api_key_here
   ```

3. **éªŒè¯é…ç½®**:
   ```python
   python -c "from src.event_extraction.deepseek_extractor import DeepSeekEventExtractor; print('APIé…ç½®æ­£ç¡®')"
   ```

## ğŸ“ˆ é¢„æœŸç»“æœ

### ç®€åŒ–æµ‹è¯•é¢„æœŸè¾“å‡º

```
ğŸš€ å¼€å§‹ç®€åŒ–ç‰ˆçœŸå®æ•°æ®æµ‹è¯•
==================================================

ğŸ”„ æµ‹è¯•æ•°æ®æ¨¡å‹...
âœ… æ•°æ®æ¨¡å‹æµ‹è¯•æˆåŠŸ
  - äº‹ä»¶1: test_event_1 (test.event)
  - äº‹ä»¶2: test_event_2 (test.event)
  - å…³ç³»: CAUSAL (ç½®ä¿¡åº¦: 0.85)

âœ… æˆåŠŸåŠ è½½ 5 æ¡çœŸå®æ–°é—»æ•°æ®

ğŸ”„ æµ‹è¯•äº‹ä»¶æŠ½å–åŠŸèƒ½...
å¤„ç†ç¬¬ 1 æ¡æ–°é—»:
æ–‡æœ¬: ã€Šç§‘åˆ›æ¿æ—¥æŠ¥ã€‹24æ—¥è®¯ï¼Œæ™¶åœ†ä»£å·¥ä¸šä¸‹åŠå¹´å±•æœ›é»¯æ·¡...
  âœ… åˆ›å»ºäº‹ä»¶: evt_test_1

âœ… äº‹ä»¶æŠ½å–æµ‹è¯•å®Œæˆï¼Œå…±åˆ›å»º 3 ä¸ªäº‹ä»¶

ğŸ”„ æµ‹è¯•äº‹ç†å…³ç³»åˆ†æ...
âœ… å…³ç³»åˆ†æå®Œæˆï¼Œå‘ç° 2 ä¸ªå…³ç³»
  å…³ç³» 1: evt_test_1 -> evt_test_2
    ç±»å‹: TEMPORAL_BEFORE
    ç½®ä¿¡åº¦: 0.80

ğŸ”„ æµ‹è¯•è¾“å‡ºå¯¼å‡º...
âœ… è¾“å‡ºå¯¼å‡ºå®Œæˆ:
  - äº‹ä»¶æ–‡ä»¶: output/simple_test_results/events_20240115_143022.jsonl
  - å…³ç³»æ–‡ä»¶: output/simple_test_results/relations_20240115_143022.jsonl

ğŸ‰ ç®€åŒ–ç‰ˆæµ‹è¯•å®Œæˆï¼
ğŸ“Š å¤„ç†ç»“æœ:
  - å¤„ç†æ–‡æœ¬: 5 æ¡
  - ç”Ÿæˆäº‹ä»¶: 3 ä¸ª
  - å‘ç°å…³ç³»: 2 ä¸ª
  - è¾“å‡ºæ–‡ä»¶: output/simple_test_results/
```

### å®Œæ•´æµæ°´çº¿é¢„æœŸè¾“å‡º

```
ğŸš€ å¼€å§‹è¿è¡ŒçœŸå®æ•°æ®å¤„ç†æµæ°´çº¿
ğŸ“ æ•°æ®æ–‡ä»¶: IC_data/filtered_data_demo.json
============================================================

âœ… æˆåŠŸåŠ è½½ 5 æ¡çœŸå®æ–°é—»æ•°æ®

ğŸ”„ å¼€å§‹äº‹ä»¶æŠ½å–...
å¤„ç†ç¬¬ 1/5 æ¡æ–°é—»...
  âœ… æŠ½å–åˆ° 2 ä¸ªäº‹ä»¶
å¤„ç†ç¬¬ 2/5 æ¡æ–°é—»...
  âœ… æŠ½å–åˆ° 3 ä¸ªäº‹ä»¶
...

âœ… äº‹ä»¶æŠ½å–å®Œæˆï¼Œå…±æŠ½å– 12 ä¸ªäº‹ä»¶

ğŸ”„ å¼€å§‹äº‹ç†å…³ç³»åˆ†æ...
âœ… å…³ç³»åˆ†æå®Œæˆï¼Œå‘ç° 8 ä¸ªå…³ç³»

ğŸ”„ å¼€å§‹GraphRAGå¢å¼º...
âœ… GraphRAGå¢å¼ºå®Œæˆ
  - å¢å¼ºäº‹ä»¶: 12 ä¸ª
  - å‘ç°æ¨¡å¼: 3 ä¸ª

ğŸ”„ å¼€å§‹å¯¼å‡ºç»“æœ...
âœ… ç»“æœå¯¼å‡ºå®Œæˆ:
  - äº‹ä»¶æ–‡ä»¶: output/real_data_results/events_20240115_143022.jsonl
  - å…³ç³»æ–‡ä»¶: output/real_data_results/relations_20240115_143022.jsonl
  - åˆå¹¶æ–‡ä»¶: output/real_data_results/combined_20240115_143022.jsonl
  - å›¾è°±æ–‡ä»¶: output/real_data_results/graph_20240115_143022.graphml
  - ç»Ÿè®¡æŠ¥å‘Š: output/real_data_results/report_20240115_143022.json

ğŸ“Š æ€§èƒ½ç»Ÿè®¡:
  - æ€»å¤„ç†æ—¶é—´: 45.32s
  - å†…å­˜ä½¿ç”¨: 256.78MB

ğŸ‰ æµæ°´çº¿è¿è¡Œå®Œæˆï¼
```

## ğŸ“„ è¾“å‡ºæ–‡ä»¶è¯´æ˜

### JSONLäº‹ä»¶æ–‡ä»¶æ ¼å¼

```json
{
  "id": "evt_1_1",
  "summary": "æ™¶åœ†ä»£å·¥ä¸šä»·æ ¼ä¸‹é™",
  "text": "ã€Šç§‘åˆ›æ¿æ—¥æŠ¥ã€‹24æ—¥è®¯ï¼Œæ™¶åœ†ä»£å·¥ä¸šä¸‹åŠå¹´å±•æœ›é»¯æ·¡...",
  "event_type": "semiconductor.pricing",
  "timestamp": "2024-01-15T14:30:22",
  "participants": ["æ™¶åœ†ä»£å·¥å‚", "ICè®¾è®¡ä¸šè€…"],
  "properties": {
    "price_change": "-15% to -20%",
    "industry": "semiconductor",
    "region": "Taiwan"
  }
}
```

### JSONLå…³ç³»æ–‡ä»¶æ ¼å¼

```json
{
  "id": "rel_1_2",
  "relation_type": "CAUSAL",
  "source_event_id": "evt_1_1",
  "target_event_id": "evt_1_2",
  "confidence": 0.85,
  "strength": 0.7,
  "properties": {
    "description": "ä»·æ ¼ä¸‹é™å¯¼è‡´äº§èƒ½åˆ©ç”¨ç‡é™ä½",
    "evidence": "ä¸šç•Œäººå£«ä¼°è®¡ç°é˜¶æ®µæ™¶åœ†ä»£å·¥å‚æˆç†Ÿåˆ¶ç¨‹äº§èƒ½åˆ©ç”¨ç‡ä»ä½"
  }
}
```

## ğŸ” ç»“æœåˆ†æ

### äº‹ä»¶ç±»å‹ç»Ÿè®¡
- `semiconductor.pricing` - ä»·æ ¼ç›¸å…³äº‹ä»¶
- `semiconductor.forecast` - å¸‚åœºé¢„æµ‹äº‹ä»¶
- `government.regulation` - æ”¿åºœç›‘ç®¡äº‹ä»¶
- `business.meeting` - å•†ä¸šä¼šè®®äº‹ä»¶
- `market.analysis` - å¸‚åœºåˆ†æäº‹ä»¶

### å…³ç³»ç±»å‹ç»Ÿè®¡
- `CAUSAL` - å› æœå…³ç³»
- `TEMPORAL_BEFORE` - æ—¶åºå…³ç³»
- `CORRELATION` - ç›¸å…³å…³ç³»

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**
   ```
   ModuleNotFoundError: No module named 'src'
   ```
   **è§£å†³**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œè„šæœ¬

2. **æ•°æ®æ–‡ä»¶æœªæ‰¾åˆ°**
   ```
   âŒ æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨: IC_data/filtered_data_demo.json
   ```
   **è§£å†³**: æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼Œç¡®ä¿æ•°æ®æ–‡ä»¶å­˜åœ¨

3. **APIé…ç½®é”™è¯¯** (å®Œæ•´æ¨¡å¼)
   ```
   âŒ DeepSeek APIè°ƒç”¨å¤±è´¥
   ```
   **è§£å†³**: æ£€æŸ¥APIå¯†é’¥é…ç½®å’Œç½‘ç»œè¿æ¥

4. **ä¾èµ–åŒ…ç¼ºå¤±**
   ```
   ModuleNotFoundError: No module named 'chromadb'
   ```
   **è§£å†³**: è¿è¡Œ `pip install -r requirements.txt`

### è°ƒè¯•æ¨¡å¼

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å¯ç”¨è¯¦ç»†æ—¥å¿—:

```python
# åœ¨è„šæœ¬å¼€å¤´æ·»åŠ 
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯:
1. è¿è¡Œçš„è„šæœ¬åç§°
2. å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
3. Pythonç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿ
4. æ˜¯å¦å®Œæˆäº†ä¾èµ–å®‰è£…

## ğŸ¯ ä¸‹ä¸€æ­¥

æµ‹è¯•æˆåŠŸåï¼Œæ‚¨å¯ä»¥:
1. ä½¿ç”¨è‡ªå·±çš„æ•°æ®æ›¿æ¢æµ‹è¯•æ•°æ®
2. è°ƒæ•´äº‹ä»¶æŠ½å–çš„æç¤ºè¯æ¨¡æ¿
3. é…ç½®Neo4jæ•°æ®åº“è¿›è¡Œå›¾è°±å­˜å‚¨
4. é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç³»ç»Ÿä¸­

---

**ç¥æ‚¨æµ‹è¯•é¡ºåˆ©ï¼** ğŸš€